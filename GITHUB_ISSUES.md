# GitHub Issues for Video Production Invoice System

以下のIssueをGitHubリポジトリに作成してください。

---

## Issue #1: エンドツーエンドテストの自動化

**タイトル**: エンドツーエンドテストの自動化

**ラベル**: `enhancement`, `testing`

**説明**:

現在、ブラウザを使用した手動テストに依存しているため、リグレッションのリスクがあります。Playwright または Cypress を使用して、以下のフローを自動化する必要があります。

### テスト対象フロー

1. クライアント登録
2. パートナー登録
3. 料金ルール作成（複数クライアント・パートナーへの適用）
4. 案件作成（複数外注先のアサイン）
5. 利益計算の正確性検証
6. ダッシュボードでのフィルタリング

### 受け入れ基準

- [ ] CI/CDパイプラインでテストが自動実行される
- [ ] 主要なユーザーフローがカバーされている
- [ ] テスト失敗時にスクリーンショットが保存される

---

## Issue #2: 請求書PDF出力機能の実装

**タイトル**: 請求書PDF出力機能の実装

**ラベル**: `feature`, `high-priority`

**説明**:

現在、案件データはデータベースに保存されていますが、クライアントに送付可能な請求書PDFの生成機能がありません。

### 要件

- 案件詳細ページから「PDF出力」ボタンをクリック
- 会社ロゴ、クライアント情報、品目一覧、合計金額を含むPDFを生成
- 日本語フォント対応（源ノ角ゴシック等）
- ダウンロードまたはメール送信機能

### 技術候補

- `@react-pdf/renderer`
- `puppeteer` (ヘッドレスブラウザ)
- `pdfkit`

### 受け入れ基準

- [ ] 請求書フォーマットがビジネス要件を満たしている
- [ ] 日本語が正しく表示される
- [ ] ファイル名が「請求書_クライアント名_日付.pdf」形式になっている

---

## Issue #3: 売上・利益レポート機能

**タイトル**: 売上・利益レポート機能の実装

**ラベル**: `feature`, `analytics`

**説明**:

経営判断のため、月次・年次の売上・利益レポートが必要です。

### 要件

- 期間指定（月次・四半期・年次）
- クライアント別・パートナー別の集計
- グラフ表示（売上推移、利益率等）
- CSV/Excel エクスポート機能

### 技術候補

- `recharts` または `chart.js` (グラフ)
- `xlsx` (Excelエクスポート)

### 受け入れ基準

- [ ] 指定期間の売上・利益が正確に集計される
- [ ] グラフが視覚的にわかりやすい
- [ ] エクスポートしたデータが会計ソフトに取り込める形式である

---

## Issue #4: ユーザー認証・権限管理の実装

**タイトル**: ユーザー認証・権限管理の実装

**ラベル**: `feature`, `security`

**説明**:

現在、認証機能がないため、誰でもデータにアクセスできる状態です。セキュリティ強化のため、ユーザー認証と役割ベースのアクセス制御が必要です。

### 要件

- ログイン・ログアウト機能
- 役割（管理者・統括・一般ユーザー）の定義
- 役割に応じたページアクセス制限
- パスワードリセット機能

### 技術候補

- `NextAuth.js` (認証)
- `bcrypt` (パスワードハッシュ化)

### 受け入れ基準

- [ ] 未認証ユーザーはログインページにリダイレクトされる
- [ ] 管理者のみがクライアント・パートナーの削除が可能
- [ ] セッション管理が適切に行われている

---

## Issue #5: データベースのPostgreSQL移行

**タイトル**: データベースをSQLiteからPostgreSQLに移行

**ラベル**: `enhancement`, `infrastructure`

**説明**:

現在、開発環境ではSQLiteを使用していますが、本番環境ではPostgreSQLへの移行が推奨されます。

### 要件

- Prismaスキーマの調整（SQLite固有の型を修正）
- マイグレーションスクリプトの作成
- 環境変数での切り替え対応

### 技術候補

- Supabase (PostgreSQL as a Service)
- Railway / Render (ホスティング)

### 受け入れ基準

- [ ] 本番環境でPostgreSQLが正常に動作する
- [ ] 既存データの移行が完了している
- [ ] パフォーマンスが改善されている

---

## Issue #6: UIのレスポンシブ対応強化

**タイトル**: モバイル・タブレット対応の強化

**ラベル**: `enhancement`, `ui/ux`

**説明**:

現在、デスクトップ環境を前提としたUIになっていますが、タブレットやスマートフォンでの操作性を向上させる必要があります。

### 要件

- テーブルのスクロール対応
- モバイルでのナビゲーション改善（ハンバーガーメニュー等）
- タッチ操作の最適化

### 受け入れ基準

- [ ] iPhone/iPad Safari で主要機能が正常に動作する
- [ ] Android Chrome で主要機能が正常に動作する
- [ ] 横スクロールが発生しない

---

これらのIssueをGitHubリポジトリに登録し、優先順位に応じて開発を進めてください。
